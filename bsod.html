<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>What does it mean?</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        width: 100vw;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-family: sans-serif;
      }

      fieldset {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        width: 400px;
        box-sizing: border-box;
      }

      label {
        display: block;
      }

      select {
        width: 100%;
        margin-bottom: 0.5rem;
      }

      span {
        font-size: small;
      }
    </style>
  </head>
  <body>
    <h1>What does BSOD mean?</h1>
    <canvas id="cvs" width="400" height="400"></canvas>

    <fieldset>
      <legend>Settings</legend>
      <div>
        <label for="b-color">B-color</label>
        <select name="b-color" id="b-color">
          <option value="black">Black</option>
          <option value="blue">Blue</option>
          <option value="beige">Beige</option>
          <option value="bisque">Bisque</option>
          <option value="blanchedalmond">Blanched almond</option>
          <option value="blueviolet">Blue-violet</option>
          <option value="brown">Brown</option>
          <option value="burlywood">Burly wood</option>
        </select>
      </div>
      <div>
        <label for="s-noun">S-noun</label>
        <select name="s-noun" id="s-noun">
          <option value="ðŸ–¥ï¸">Screen (Desktop computer)</option>
          <option value="ðŸŒŠ">Sea (Wave)</option>
          <option value="ðŸ¦¥">Sloth</option>
          <option value="ðŸ¦¨">Skunk</option>
          <option value="ðŸ¦¢">Swan</option>
          <option value="ðŸ">Snake</option>
          <option value="ðŸ¦­">Seal</option>
          <option value="ðŸ¦ˆ">Shark</option>
          <option value="ðŸš">Spiral shell</option>
          <option value="ðŸŒ">Snail</option>
          <option value="ðŸ•·ï¸">Spider</option>
          <option value="ðŸ•¸ï¸">Spiderweb</option>
          <option value="ðŸ¦‚">Scorpion</option>
          <option value="ðŸŒ»">Sunflower</option>
          <option value="â˜˜ï¸">Shamrock</option>
          <option value="ðŸ•¶ï¸">Sunglasses</option>
          <option value="ðŸ¦º">Safety vest</option>
          <option value="ðŸ§£">Scarf</option>
          <option value="ðŸ§¦">Socks</option>
          <option value="ðŸ©³">Shorts</option>
          <option value="ðŸŽ·">Saxophone</option>
          <option value="ðŸ›¡ï¸">Shield</option>
          <option value="ðŸªš">Saw (Carpentry saw)</option>
          <option value="ðŸª›">Screwdriver</option>
          <option value="ðŸ§¼">Soap</option>
          <option value="ðŸ§½">Sponge</option>
          <option value="ðŸª¨">Stone (Rock)</option>
          <option value="â˜€ï¸">Sun</option>
          <option value="â­">Star</option>
          <option value="ðŸŒŒ">Sky (Milky way)</option>
          <option value="ðŸŒªï¸">Storm (Tornado)</option>
          <option value="â„ï¸">Snow</option>
          <option value="â˜ƒï¸">Snowman</option>
          <option value="ðŸ¥ª">Sandwich</option>
          <option value="ðŸ¥—">Salad (Green salad)</option>
          <option value="ðŸ¦">Shrimp</option>
          <option value="ðŸ¦‘">Squid</option>
        </select>
      </div>
      <div>
        <label for="d-noun">D-noun</label>
        <select name="d-noun" id="d-noun">
          <option value="ðŸ’€">Death (Skull)</option>
          <option value="ðŸ¬">Dolphin</option>
          <option value="ðŸ•">Dog</option>
          <option value="ðŸ•Šï¸">Dove</option>
          <option value="ðŸ¦†">Duck</option>
          <option value="ðŸ¦¤">Dodo</option>
          <option value="ðŸ‰">Dragon</option>
          <option value="ðŸ¦•">Dino (Sauropod)</option>
          <option value="ðŸ¦–">Dino (T-Rex)</option>
          <option value="ðŸ‘—">Dress</option>
          <option value="ðŸ’Ž">Diamond (Gem stone)</option>
          <option value="ðŸ¥">Drum</option>
          <option value="ðŸ’µ">Dollar banknote</option>
          <option value="ðŸ—¡ï¸">Dagger</option>
          <option value="ðŸ’§">Droplet</option>
          <option value="ðŸŽ²">Die</option>
          <option value="ðŸ©">Doughnut</option>
        </select>
      </div>
      <div>
        <button id="randomizeButton">ðŸŽ²</button>
        <button id="copyButton">ðŸ“‹</button>
        <span id="message"></span>
      </div>
    </fieldset>

    <script>
      const cvs = document.getElementById("cvs");
      const ctx = cvs.getContext("2d");

      const selects = document.querySelectorAll("select");
      selects.forEach((select) => {
        select.addEventListener("change", redraw);
      });

      const randomizeButton = document.getElementById("randomizeButton");
      randomizeButton.addEventListener("click", () => {
        randomize(0);
        randomize(1);
        randomize(2);
        redraw();
      });

      const copyButton = document.getElementById("copyButton");
      const msg = document.getElementById("message");
      copyButton.addEventListener("click", () => {
        cvs.toBlob(function (blob) {
          const item = new ClipboardItem({ "image/png": blob });
          navigator.clipboard.write([item]);
          msg.innerText = "Copied to clipboard!";
          setTimeout(() => {
            msg.innerText = "";
          }, 3000);
        });
      });

      function getNameAndValue(idx) {
        const selected = selects[idx].selectedOptions[0];
        return [selected.innerText.replace(/ \(.*\)$/g, ""), selected.value];
      }

      function redraw() {
        const [bColorName, bColorValue] = getNameAndValue(0);
        const [sNounName, sNounValue] = getNameAndValue(1);
        const [dNounName, dNounValue] = getNameAndValue(2);

        const completeName = `${bColorName} ${sNounName} of ${dNounName}`;

        ctx.clearRect(0, 0, cvs.width, cvs.height);

        ctx.fillStyle = bColorValue;
        ctx.fillRect(0, 0, cvs.width, cvs.height);

        ctx.font = `${0.95 * cvs.height}px serif`;
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.globalAlpha = 0.75;
        ctx.fillText(sNounValue, 0.5 * cvs.width, 0.585 * cvs.height);

        ctx.font = `${0.5 * cvs.height}px serif`;
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.globalAlpha = 1;
        ctx.fillText(dNounValue, 0.5 * cvs.width, 0.525 * cvs.height);

        ctx.font = `${0.05 * cvs.height}px sans-serif`;
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.globalAlpha = 1;
        ctx.lineWidth = 2;
        ctx.strokeStyle = "black";
        ctx.fillStyle = "white";
        ctx.strokeText(completeName, 0.5 * cvs.width, 0.9 * cvs.height);
        ctx.fillText(completeName, 0.5 * cvs.width, 0.9 * cvs.height);
      }

      function randomize(idx) {
        const select = selects[idx];
        select.selectedIndex = Math.floor(
          Math.random() * select.options.length
        );
      }

      redraw();
    </script>
  </body>
</html>
